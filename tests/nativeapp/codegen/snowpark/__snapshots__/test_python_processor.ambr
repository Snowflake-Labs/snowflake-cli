# serializer version: 1
# name: test_create_and_write_to_sql_files_no_existing_generate
  dict({
    PosixPath('moduleA/main.py'): PosixPath('__generated/moduleA/main.sql'),
    PosixPath('moduleB/main.py'): PosixPath('__generated/moduleB/main.sql'),
  })
# ---
# name: test_edit_setup_script_with_exec_imm_sql
  '''
  EXECUTE IMMEDIATE FROM '/__generated/moduleB/dummy.sql';
  EXECUTE IMMEDIATE FROM '/__generated/dummy.sql';
  
  '''
# ---
# name: test_edit_setup_script_with_exec_imm_sql.1
  '''
  create application role app_public;
  EXECUTE IMMEDIATE FROM '/__generated/__generated.sql';
  
  '''
# ---
# name: test_generate_create_sql_ddl_statements_w_all_entries
  '''
  CREATE OR REPLACE
  PROCEDURE DATA.my_function(first int DEFAULT 42)
  RETURNS int
  LANGUAGE PYTHON
  RUNTIME_VERSION=3.11
  IMPORTS=('/path/to/import1.py', '/path/to/import2.zip')
  PACKAGES=('package_one==1.0.2', 'package_two')
  EXTERNAL_ACCESS_INTEGRATIONS=('integration_one', 'integration_two')
  SECRETS=('key1'=secret_one, 'key2'=integration_two)
  HANDLER='my_function_handler'
  EXECUTE AS OWNER;
  
  '''
# ---
# name: test_generate_create_sql_ddl_statements_w_select_entries
  '''
  CREATE OR REPLACE
  PROCEDURE my_function(first int DEFAULT 42)
  RETURNS int
  LANGUAGE PYTHON
  RUNTIME_VERSION=3.11
  HANDLER='my_function_handler'
  EXECUTE AS OWNER;
  
  '''
# ---
# name: test_generate_grant_sql_ddl_statements
  '''
  GRANT USAGE ON PROCEDURE DATA.my_function
  TO APPLICATION ROLE APP_ADMIN;
  GRANT USAGE ON PROCEDURE DATA.my_function
  TO APPLICATION ROLE APP_VIEWER;
  '''
# ---
# name: test_process_no_collected_functions
  ''
# ---
# name: test_process_with_collected_functions
  dict_values(["-- stagepath/main.py\nCREATE OR REPLACE\nPROCEDURE DATA.my_function(first int DEFAULT 42)\nRETURNS int\nLANGUAGE PYTHON\nRUNTIME_VERSION=3.11\nIMPORTS=('/path/to/import1.py', '/path/to/import2.zip', '/stagepath/main.py')\nPACKAGES=('package_one==1.0.2', 'package_two')\nEXTERNAL_ACCESS_INTEGRATIONS=('integration_one', 'integration_two')\nSECRETS=('key1'=secret_one, 'key2'=integration_two)\nHANDLER='main.my_function_handler'\nEXECUTE AS OWNER;\n\nGRANT USAGE ON PROCEDURE DATA.my_function\nTO APPLICATION ROLE APP_ADMIN;\nGRANT USAGE ON PROCEDURE DATA.my_function\nTO APPLICATION ROLE APP_VIEWER;", "-- stagepath/data.py\nCREATE OR REPLACE\nPROCEDURE DATA.my_function(first int DEFAULT 42)\nRETURNS int\nLANGUAGE PYTHON\nRUNTIME_VERSION=3.11\nIMPORTS=('/stagepath/data.py', '@dummy_stage_str', '@dummy_stage_tuple', '/', '/', '/stagepath/extra_import1.zip', '/stagepath/extra_import2.zip', '/stagepath/some_dir_str', '/stagepath/some_dir2_tuple', '/stagepath/main.py', '/stagepath/main.py')\nPACKAGES=('package_one==1.0.2', 'package_two')\nEXTERNAL_ACCESS_INTEGRATIONS=('integration_one', 'integration_two')\nSECRETS=('key1'=secret_one, 'key2'=integration_two)\nHANDLER='data.my_function_handler'\nEXECUTE AS OWNER;\n\nGRANT USAGE ON PROCEDURE DATA.my_function\nTO APPLICATION ROLE APP_ADMIN;\nGRANT USAGE ON PROCEDURE DATA.my_function\nTO APPLICATION ROLE APP_VIEWER;"])
# ---
