definition_version: 2
entities:
  pkg_v1:
    type: application package
    identifier: <% fn.concat_ids('stage_w_subdirs_pkg_', ctx.env.USER) %>
    stage_subdirectory: v1
    manifest: ""
    artifacts:
      - src: app/v1/*
        dest: ./

  pkg_v2:
    type: application package
    identifier: <% fn.concat_ids('stage_w_subdirs_pkg_', ctx.env.USER) %>
    stage_subdirectory: v2
    manifest: ""
    artifacts:
      - src: app/v2/*
        dest: ./

  app_v1:
    type: application
    from:
      target: pkg_v1
    identifier: <% fn.concat_ids('stage_w_subdirs_app_v1_', ctx.env.USER) %>

  app_v2:
    type: application
    from:
      target: pkg_v2
    identifier: <% fn.concat_ids('stage_w_subdirs_app_v2_', ctx.env.USER) %>
